{% extends "base.html" %}

{% block title %}å‹¤å‹™é›†è¨ˆ{% endblock %}

{% block content %}
<h1>å‹¤å‹™é›†è¨ˆ</h1>

<form method="POST">
    <label>ã‚¹ã‚¿ãƒƒãƒ•:</label>
    <select name="staff_id">
        <option value="">å…¨å“¡</option>
        {% for staff in staff_list %}
            <option value="{{ staff.id }}">{{ staff.name }}</option>
        {% endfor %}
    </select>

    <label>æœˆ:</label>
    <input type="month" name="work_month">

    <button type="submit">æ¤œç´¢</button>
</form>

{% for staff in results %}
<h2>{{ staff.name }}ã®å‹¤å‹™é›†è¨ˆ</h2>
<table border="1">
    <tr>
        <th>æ—¥ä»˜</th>
        <th>å‡ºå‹¤æ™‚åˆ»</th>
        <th>é€€å‹¤æ™‚åˆ»</th>
        <th>åŠ´åƒæ™‚é–“ï¼ˆæ™‚é–“ï¼‰</th>
        <th>çµ¦ä¸ï¼ˆå††ï¼‰</th>
    </tr>
    {% for day in staff.days %}
    <tr>
        <td>{{ day.date }}</td>
        <td>{{ day.clock_in }}</td>
        <td>{{ day.clock_out }}</td>
        <td>{{ day.work_time }}</td>
        <td>{{ day.salary }}</td>
    </tr>
    {% endfor %}
    <tr>
        <td colspan="3"><strong>åˆè¨ˆ</strong></td>
        <td><strong>{{ staff.total_hours | round(2) }} æ™‚é–“</strong></td>
        <td><strong>{{ staff.total_salary | round(2) }} å††</strong></td>
    </tr>
</table>
{% endfor %}

<!-- ã‚¨ã‚¯ã‚»ãƒ« / PDF ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ -->
<form action="{{ url_for('export_summary', file_type='excel') }}" method="POST">
    <button type="submit">ğŸ“Š Excelãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
</form>
<form action="{{ url_for('export_summary', file_type='pdf') }}" method="POST">
    <button type="submit">ğŸ“„ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
</form>

{% endblock %}
