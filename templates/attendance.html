{% extends "base.html" %}

{% block title %}å‡ºé€€å‹¤ç®¡ç†{% endblock %}

{% block content %}
<h1>å‡ºé€€å‹¤ã‚¢ãƒ—ãƒª</h1>

<ul>
    {% if messages %}
        {% for message in messages %}
            <li>{{ message.message_text }}</li>
        {% endfor %}
    {% else %}
        <li>ğŸ“¢ ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
    {% endif %}
</ul>

<h2>ãƒ¯ãƒ³ã‚¿ãƒƒãƒå‡ºå‹¤</h2>
<!-- âœ… ã‚¹ã‚¿ãƒƒãƒ•ã”ã¨ã«ãƒœã‚¿ãƒ³ã®è‰²ã‚’å¤‰ãˆã‚‹ -->
{% set colors = ["red", "blue", "green", "orange", "purple"] %}
{% for person in staff[:5] %}
<form action="{{ url_for('clock_in') }}" method="POST" style="display:inline;">
    <input type="hidden" name="staff_id" value="{{ person.id }}">
    <button type="submit" style="background-color: {{ colors[loop.index0 % colors|length] }}; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">
        {{ person.name }} å‡ºå‹¤
    </button>
</form>
{% endfor %}


<h2>å‡ºé€€å‹¤è¨˜éŒ²</h2>

<!-- âœ… æœˆã”ã¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
<form method="GET">
    <label>æœˆã‚’é¸æŠ:</label>
    <input type="month" name="month" value="{{ selected_month }}">
    <button type="submit">æ¤œç´¢</button>
</form>

<table>
    <tr>
        <th>æ—¥ä»˜</th> <!-- âœ… æ—¥ä»˜ã‚’è¿½åŠ  -->
        <th>ã‚¹ã‚¿ãƒƒãƒ•</th>
        <th>å‡ºå‹¤æ™‚åˆ»</th>
        <th>é€€å‹¤æ™‚åˆ»</th>
        <th>é€€å‹¤çŠ¶æ…‹</th>
        <th>ä¿®æ­£</th>
        <th>å‰Šé™¤</th>
    </tr>
    {% for record in attendance_records %}
    <tr>
        <td>{{ record.work_date }}</td> <!-- âœ… æ—¥ä»˜ã‚’è¡¨ç¤º -->
        <td>{{ record.staff.name }}</td>
        <td>{{ record.clock_in.strftime('%H:%M') if record.clock_in else '' }}</td>
ã€€ã€€ã€€ã€€ã€€<td>{{ record.clock_out.strftime('%H:%M') if record.clock_out else '' }}</td>
        <td>
            {% if not record.clock_out %}
            <form action="{{ url_for('clock_out', attendance_id=record.id) }}" method="POST">
                <button type="submit">é€€å‹¤</button>
            </form>
            {% else %}
            é€€å‹¤æ¸ˆã¿
            {% endif %}
        </td>
        <td>
            <form action="{{ url_for('edit_attendance', attendance_id=record.id) }}" method="GET">
                <button type="submit">ä¿®æ­£</button>
            </form>
        </td>
        <td>
            <form action="{{ url_for('delete_attendance', attendance_id=record.id) }}" method="POST" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                <button type="submit" style="background-color: red; color: white;">å‰Šé™¤</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<p><a href="{{ url_for('staff_list') }}">ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ã¸</a></p>
{% endblock %}
